#	네트워크 계층

- 송신 호스트 --> 수신 호스트로 패킷 전송



##	주요 기능

###	포워딩(전달)

- 라우터에서 적절한 출력 링크로 패킷 이동
- 매우 짧은 시간동안 이뤄짐 --> 하드웨어에서 실행



###	라우팅

- 패킷의 경로를 결정
- 경로 계산 알고리즘 --> 라우팅 알고리즘
- 네트워크 전반에 걸쳐서 출발지 - 목적지까지 데이터그램의 경로 결정
- 상대적으로 긴 시간 --> 대개 소프트웨어에서 실행
- 포워딩 테이블 : 라우터는 도착하는 패킷 헤더의 필드값을 조사해서 패킷을 포워딩함



##	네트워크 서비스 모델

- 호스트 간 패킷 전송 특성을 정의
- 보장된 전달
- 지연 제한시간 이내 보장된 전달
- 순서화 패킷 전달
- 최소 대역폭 보장
- 보안
- 최선형 서비스 제공
- 패킷 스위치
  - 링크 계층 스위치 : 링크 계층 프레임 필드값에 근거해서 포워딩 결정
  - 라우터 : 네트워크 계층 필드값에 근거해서 포워딩 결정



##	라우터

- 구조
  - 라우팅(관리 제어 평면, 소프트웨어) : 라우팅 프로세서
  - 포워딩(데이터 평면, 하드웨어) : 입력포트, 스위치 구조, 출력 포트



###	패킷 스케줄링

- `First-In-First-Out(FIFO)`
- 우선순위 큐잉
- `Round robin`, `Weighted Fair Queuing`



##	인터넷 프로토콜(IP) : IPv4, IPv6

- 라우터는 버전번호를 확인하고 데이터그램을 어떻게 해석할지 결정함



###	IPv4

- 링크 계층이 전달할 수 있는 최대 데이터 크기인 `MTU`에 따라 전송 패킷의 크기가 결정됨
- 데이터그램의 페이로드를 2개 이상의 작은 조각으로 쪼개서ㅊ 출력 링크로 전송함
- 목적지 호스트에서는 재결합을 위해 IP 데이터그램 헤더에서 식별자, 플래그, 단편화 오프셋을 분석
- 호스트와 물리 링크 사이의 경계를 인터페이스라고 하는데, IP 주소는 인터페이스와 관련이 있음
- DHCP(Dynamic Host Configuration Protocol)



###	IPv6

- 확장된 주소 기능 : 애니캐스트 도입
- 40Byte 헤더 : 기존보다 작아짐
- 흐름 라벨링
- 삭제된 것 : 단편화/재결합, 헤더 체크섬, 옵션
- IPv4에서 IPv6로 변환은 터널링을 사용



##	라우팅 알고리즘

- 분류
  - 중앙 집중형 라우팅 알고리즘(링크 상태 알고리즘), 분산 라우팅 알고리즘
  - 정적 라우팅 알고리즘, 동적 라우팅 알고리즘
  - 부하에 민감한 알고리즘, 부하에 민감하지 않은 알고리즘(오늘날 라우팅 알고리즘은 부하에 민감X)



##	인터넷에서의 자율 시스템(Auto System) 내부 라우팅 : OSPF

- 개방형 최단 경로 우선(`Open Shortest Path First`) 프로토콜
- 보안 제공
- 복수 동일 비용 경로
- 유니캐스트와 멀티캐스트 라우팅의 통합 지원
- 단일 자율 시스템 내 계층 지원



##	ISP 간 라우팅 : BGP

- 인터넷의 모든 AS들은 경계 게이트웨이 프로토콜(`Border Gateway Protocol`)을 사용
- BGP가 라우터에 제공하는 것
  - 이웃 AS로부터 도달 가능한 서브넷 접두부 정보 획득
  - 서브넷 주소 접두부로의 가장 좋은 경로 결정



###	최고의 경로 결정

- 뜨거운 감자 라우팅(Hot Potato Routing)
- 경로 선택 알고리즘



##	소프트웨어 정의 네트워크(SDN) 제어 평면

- 구조적 특징
  - 플로우 기반 포워딩
  - 데이터 평면, 제어 평면 분리
  - 네트워크 제어 기능이 데이터 평면 스위치 외부에 존재
  - 프로그램이 가능한 네트워크



##	인터넷 제어 메시지 프로토콜(ICMP)

- 호스트 - 라우터 간 네트워크 계층 정보를 송수신하기 위해 사용 --> 주로 오류 보고 사용
- ICMP 메시지가 IP 데이터그램에 캡슐화됨 --> 구조적으로 IP 윗층에 있음